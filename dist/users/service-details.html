<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Worker Profile</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="service-details.css">
</head>
<body>
  <header class="header">
    <button class="back-button" onclick="window.history.back();">&larr; Back</button>
    </div>
  </header>

  <main class="profile-container">
    <div class="profile-header">
      <div class="profile-image-container">
        <img src="/dist/users/Images/michael2.png" alt="Worker's Profile Picture" class="profile-image">     
     </div>
      <h1 class="worker-name">Michael Cruz</h1>
      <p class="worker-contact">09453-254-366</p>
      <p class="worker-location">üìç Manila City</p>
    </div>

    <section class="about-section">
      <h2>About</h2>
      <p>
        I am a skilled tradesman with extensive experience as a plumber, light carpenter, painter, and mounting specialist. 
        With over 10 years of hands-on experience, I pride myself on delivering top-quality workmanship and exceptional customer service.
      </p>
    </section>

    <section class="skills-section">
      <h2>Essential Skills</h2>
      <button class="skill-button">Light Carpentry</button>
    </section>

    <section class="rating-section">
      <h2>Rating</h2>
      <div class="rating-container">
        <span class="rating-value">5.0</span>
        <div class="stars">
          <span>‚≠ê</span><span>‚≠ê</span><span>‚≠ê</span><span>‚≠ê</span><span>‚≠ê</span>
        </div>
      </div>
    </section>

    <section class="review-section">
        <h2>Reviews</h2>
        <div id="review-list"></div>
    </section>
  </main>
  


  <footer class="footer">
    <section class="service-rate-section">
      <h3>Service Rate:</h3>
      <p class="service-rate">‚Ç±150/hr</p>
    </section>

    <div class="button-container">
      <a href="messages.html" class="message-button">Message</a>
      <a href="request-service.html" class="request-button">Request Service</a>
    </div>
  </footer>

  <script>
    function loadReviews() {
      const reviews = JSON.parse(localStorage.getItem('reviews')) || [];
      const reviewList = document.getElementById('review-list');



      // Retrieve the current user's details
      const userDetails = JSON.parse(localStorage.getItem("userDetails"));

      reviews.forEach((review) => {
        if (review.workerId === 'michael-cruz') { // Show reviews only for this worker
          const reviewCard = document.createElement('div');
          reviewCard.classList.add('service-card');
          
          // Get the reviewer's name and image from the stored userDetails
          const reviewerName = userDetails ? `${userDetails.firstName} ${userDetails.lastName}` : 'Anonymous';
          const reviewerImage = userDetails ? userDetails.profilePicture : '/dist/users/Images/default-user.png'; // Default image if none exists

          reviewCard.innerHTML = `
            <div class="review-header">
              <img src="${reviewerImage}" alt="Reviewer Image" class="reviewer-image">
              <strong>${reviewerName}</strong>
            </div>
            <div class="service-info">
              <p><strong>Review:</strong> ${review.comment || 'No comment provided'}</p>
              <p><strong>Quality Rating:</strong> ${review.qualityRating} ‚≠ê</p>
              <p><strong>Service Rating:</strong> ${review.serviceRating} ‚≠ê</p>
            </div>
          `;
          reviewList.appendChild(reviewCard);
        }
      });
    }

    // localStorage.removeItem('reviews');

    document.addEventListener('DOMContentLoaded', loadReviews);

  </script>
</body>
</html>
